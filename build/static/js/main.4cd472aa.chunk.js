(this["webpackJsonpchat-react"]=this["webpackJsonpchat-react"]||[]).push([[0],{38:function(e,t,n){},39:function(e,t,n){},66:function(e,t){},69:function(e,t,n){"use strict";n.r(t);var c=n(0),s=n(1),a=n.n(s),r=n(30),o=n.n(r),i=(n(38),n(2)),u=(n(39),n(32));var l=function(e){var t=e.message,n=e.right,s=e.className,a=n?"right":"";return Object(c.jsxs)("p",{className:"message ".concat(a," ").concat(s),children:[" ",t," "]})},j=n(31),b=n.n(j),d=null;var f=function(e){var t=e.room,n=e.user,r=Object(s.useState)(!1),o=Object(i.a)(r,2),j=o[0],f=o[1],m=Object(s.useState)([]),O=Object(i.a)(m,2),h=O[0],g=O[1],v=Object(s.useState)([]),p=Object(i.a)(v,2),x=p[0],N=p[1],E=Object(s.useState)(""),S=Object(i.a)(E,2),C=S[0],y=S[1],k=Object(s.useRef)(null),w=Object(s.useRef)(null);Object(s.useEffect)((function(){return(d=b()()).emit("set_nick",n),d.emit("join_room",t),d.on("users",(function(e){g(e)})),document.title=t,function(){d.off("server_response")}}),[t,n]),Object(s.useEffect)((function(){d.on("server_response",(function(e){N((function(t){return[].concat(Object(u.a)(t),[e])}))}))}),[]),Object(s.useEffect)((function(){var e;j||null===w||void 0===w||null===(e=w.current)||void 0===e||e.scrollIntoView()}),[x]),Object(s.useEffect)((function(){return document.addEventListener("keydown",F),function(){return document.removeEventListener("keydown",F)}}),[]);var F=function(e){e.code.toUpperCase().includes("ENTER")&&k.current.focus()};return Object(c.jsxs)("div",{className:"chat fade in",children:[Object(c.jsxs)("label",{className:"room",children:[" ",t," "]}),Object(c.jsxs)("span",{className:"users",children:[Object(c.jsxs)("label",{className:"sub fade in quick",children:[" ",h.length," online: "]}),null===h||void 0===h?void 0:h.map((function(e,t){return Object(c.jsxs)("label",{className:"sub fade in quick",children:[" ",e," "]},t)}))]}),Object(c.jsx)("br",{}),Object(c.jsx)("div",{className:"output",onScroll:function(e){f(e.target.scrollHeight-e.target.scrollTop!==e.target.clientHeight)},children:x.map((function(e,t){var s=new Date(e.time).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}).toLowerCase(),r=t===x.length-1?w:null;if("server"===e.id)return Object(c.jsxs)(a.a.Fragment,{children:[Object(c.jsx)("br",{}),Object(c.jsxs)("label",{className:"sub fade in quick",ref:r,children:[" ",e.message," \u2014 ",s," "]}),Object(c.jsx)("br",{})]},t);var o,i=e.user===n?"right":"",u=(null===(o=x[t-1])||void 0===o?void 0:o.id)===e.id?null:Object(c.jsxs)("label",{className:"sub ".concat(i," "),children:[" ",e.user," \u2014 ",s," "]});return Object(c.jsxs)(a.a.Fragment,{children:[u,Object(c.jsx)(l,{right:e.user===n,message:e.message}),Object(c.jsx)("span",{ref:r})]},t)}))}),Object(c.jsx)("input",{placeholder:"say something",type:"text",value:C,onKeyPress:function(e){d&&""!==C&&e.code.toUpperCase().includes("ENTER")&&(d.emit("client_message",{id:d.id,user:n,message:C,room:t,time:new Date}),y(""))},onChange:function(e){y(e.target.value)},ref:k,autoFocus:!0})]})};var m=function(){var e=Object(s.useState)(""),t=Object(i.a)(e,2),n=t[0],a=t[1],r=Object(s.useState)(""),o=Object(i.a)(r,2),u=o[0],l=o[1],j=Object(s.useState)(!1),b=Object(i.a)(j,2),d=b[0],m=b[1],O=Object(s.useState)(""),h=Object(i.a)(O,2),g=h[0],v=h[1],p=function(e){e.code.toUpperCase().includes("ENTER")&&n.length>0&&u.length>0&&x()},x=function(){v("fade out"),setTimeout((function(){m(!0)}),800)};return Object(c.jsx)("div",{className:"App",children:Object(c.jsx)("div",{className:"main",children:d?Object(c.jsx)(f,{room:n,user:u}):Object(c.jsxs)("div",{className:"home ".concat(g),children:[Object(c.jsx)("input",{className:"room",type:"text",placeholder:"room code",value:n,onChange:function(e){a(e.target.value)},onKeyPress:p,autoFocus:!0}),Object(c.jsx)("input",{className:"user",type:"text",placeholder:"name",value:u,onChange:function(e){l(e.target.value)},onKeyPress:p}),Object(c.jsx)("button",{disabled:0===n.length||0===u.length,className:"join",onClick:x,children:" join "})]})})})},O=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,70)).then((function(t){var n=t.getCLS,c=t.getFID,s=t.getFCP,a=t.getLCP,r=t.getTTFB;n(e),c(e),s(e),a(e),r(e)}))};o.a.render(Object(c.jsx)(a.a.StrictMode,{children:Object(c.jsx)(m,{})}),document.getElementById("root")),O()}},[[69,1,2]]]);
//# sourceMappingURL=main.4cd472aa.chunk.js.map