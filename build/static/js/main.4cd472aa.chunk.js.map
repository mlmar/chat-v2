{"version":3,"sources":["js/modules/Message.js","js/modules/Chat.js","App.js","reportWebVitals.js","index.js"],"names":["Message","message","right","className","rightClass","socket","Chat","room","user","useState","scrolled","setScrolled","users","setUsers","output","setOutput","setMessage","messageBox","useRef","latest","useEffect","io","emit","on","data","document","title","off","prev","current","scrollIntoView","addEventListener","handleFocus","removeEventListener","e","code","toUpperCase","includes","focus","length","map","u","i","onScroll","target","scrollHeight","scrollTop","clientHeight","date","Date","time","toLocaleTimeString","hour","minute","toLowerCase","ref","id","Fragment","name","placeholder","type","value","onKeyPress","onChange","autoFocus","App","setRoom","setUser","joined","setJoined","transition","setTransition","handleKeyPress","handleJoin","setTimeout","disabled","onClick","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.4cd472aa.chunk.js","sourcesContent":["import React from 'react';\r\n\r\nfunction Message({ message, right, className}) {\r\n  var rightClass = right ? \"right\" : \"\";\r\n  return (\r\n    <p className={`message ${rightClass} ${className}`}> {message} </p> \r\n  )\r\n}\r\n\r\nexport default Message;","import React, { useState, useEffect, useRef } from 'react';\r\nimport Message from './Message.js';\r\n\r\nimport io from 'socket.io-client';\r\nvar socket = null;\r\n\r\n/*  Chat component with output and input subcomponents\r\n *    room : room code\r\n *    user : user nickname\r\n */\r\nfunction Chat({ room, user }) {\r\n  const [scrolled, setScrolled] = useState(false);\r\n\r\n  const [users, setUsers] = useState([]);\r\n  const [output, setOutput] = useState([]);\r\n  const [message, setMessage] = useState(\"\");\r\n\r\n  const messageBox = useRef(null);\r\n  const latest = useRef(null);\r\n\r\n  /* Create socket connection\r\n   * Listen for server messages\r\n   * Set nickname\r\n   * Join room\r\n   * Send join message\r\n   */\r\n  useEffect(() => {\r\n    socket = io();\r\n\r\n    socket.emit('set_nick', user);\r\n    socket.emit('join_room', room);\r\n\r\n    socket.on('users', data => {\r\n      setUsers(data);\r\n    })\r\n\r\n    document.title = room;\r\n\r\n    return () => { \r\n      socket.off('server_response');\r\n    };\r\n\r\n  }, [room, user]);\r\n\r\n  useEffect(() => {\r\n    // append all incoming messages to state array\r\n    socket.on('server_response', data => {\r\n      setOutput(prev => [...prev, data]);\r\n    });\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    if(!scrolled)\r\n      latest?.current?.scrollIntoView();\r\n  }, [output])\r\n\r\n  /* focus on message input when user presses enter anywhere on the document\r\n   */\r\n  useEffect(() => {\r\n    document.addEventListener(\"keydown\", handleFocus);\r\n    return () => document.removeEventListener(\"keydown\", handleFocus);\r\n  }, []);\r\n\r\n  const handleFocus = e => {\r\n    if(e.code.toUpperCase().includes(\"ENTER\")) {\r\n      messageBox.current.focus();\r\n    }\r\n  }\r\n\r\n  const handleScroll = e => {\r\n    setScrolled(e.target.scrollHeight - e.target.scrollTop !== e.target.clientHeight); \r\n  }\r\n\r\n  // send message if connection exists, mesage exists and enter key was pressed\r\n  const handleSend = e => {\r\n    if(socket && message !== \"\" && e.code.toUpperCase().includes(\"ENTER\")) {\r\n      socket.emit('client_message', { id : socket.id, user : user, message : message, room : room, time : new Date() });\r\n      setMessage(\"\");\r\n    }\r\n  }\r\n  \r\n  // update message state as user types\r\n  const handleMessageChange = e => {\r\n    setMessage(e.target.value);\r\n  }\r\n\r\n  return (\r\n    <div className=\"chat fade in\">\r\n      <label className=\"room\"> {room} </label>\r\n      <span className=\"users\"> \r\n        <label className=\"sub fade in quick\"> {users.length} online: </label>\r\n        { users?.map((u, i) => <label className=\"sub fade in quick\" key={i}> {u} </label>) } \r\n      </span>\r\n      <br/>\r\n      <div className=\"output\" onScroll={handleScroll}>\r\n        {\r\n          output.map((data, i) => {\r\n            var date = new Date(data.time).toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'}).toLowerCase();\r\n            var ref = i === output.length - 1 ? latest : null;\r\n            if(data.id === \"server\") {\r\n              return (\r\n                <React.Fragment key={i}>\r\n                  <br/>\r\n                  <label className=\"sub fade in quick\" ref={ref}> {data.message} &mdash; {date} </label>\r\n                  <br/>\r\n                </React.Fragment>\r\n              )\r\n            } else {\r\n              var right = data.user === user ? \"right\" : \"\"; // determine if message is from the user\r\n              var name = output[i - 1]?.id === data.id ? null : <label className={`sub ${right} `}> {data.user} &mdash; {date} </label>; // hide name for consecutive messages\r\n              return (\r\n                <React.Fragment key={i}>\r\n                  {name}\r\n                  <Message right={data.user === user} message={data.message}/>\r\n                  <span ref={ref}></span>\r\n                </React.Fragment>\r\n              )\r\n            }\r\n          })\r\n        }\r\n      </div>\r\n      <input placeholder=\"say something\" type=\"text\" value={message} onKeyPress={handleSend} onChange={handleMessageChange} ref={messageBox} autoFocus\r\n      />\r\n    </div>\r\n\r\n  )\r\n}\r\n\r\nexport default Chat;","import React, { useState } from 'react';\r\nimport './App.css';\r\nimport Chat from './js/modules/Chat.js';\r\n\r\n\r\nfunction App() {\r\n  const [ room, setRoom ] = useState(\"\");\r\n  const [ user, setUser ] = useState(\"\");\r\n  const [ joined, setJoined ] = useState(false);\r\n  const [ transition, setTransition] = useState(\"\");\r\n\r\n  const handleKeyPress = (e) => {\r\n    if(e.code.toUpperCase().includes(\"ENTER\") && room.length > 0 && user.length > 0)\r\n      handleJoin();\r\n  }\r\n\r\n  const handleRoomChange = (e) => {\r\n    setRoom(e.target.value);\r\n  }\r\n\r\n  const handleUserChange = (e) => {\r\n    setUser(e.target.value);\r\n  }\r\n\r\n  const handleJoin = () => {\r\n    setTransition(\"fade out\");\r\n    setTimeout(() => {\r\n      setJoined(true);\r\n    }, 800)\r\n  }\r\n  \r\n  return (\r\n    <div className=\"App\">\r\n        <div className=\"main\">\r\n          { !joined ? \r\n            <div className={`home ${transition}`}>\r\n              <input className=\"room\" type=\"text\" placeholder=\"room code\" value={room} onChange={handleRoomChange} onKeyPress={handleKeyPress} autoFocus/>\r\n              <input className=\"user\" type=\"text\" placeholder=\"name\" value={user} onChange={handleUserChange} onKeyPress={handleKeyPress} />\r\n              <button disabled={room.length === 0 || user.length === 0} className=\"join\" onClick={handleJoin}> join </button>\r\n            </div>\r\n            :\r\n            <Chat room={room} user={user}/>\r\n          }\r\n        </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}